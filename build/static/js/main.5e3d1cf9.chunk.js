(this["webpackJsonpreact-extinguisher"]=this["webpackJsonpreact-extinguisher"]||[]).push([[0],{100:function(e,t,a){},108:function(e,t,a){"use strict";a.r(t),a.d(t,"browserHistory",(function(){return ue}));var n=a(2),r=a(0),c=a.n(r),o=a(11),s=a.n(o),i=(a(100),a(23)),l=a(13),u=a(15),j=a.n(u),h=a(22),b=a(12),d=a(148),g=a(153),x=a(154),p=a(158),m=a(157),O=a(151),f=a(155),v=a(156),y=a(110),w=a(68),S=a.n(w),C=a(69),k=a.n(C),I=a(50),N=a(64),T=a(63),E=Object(d.a)({table:{minWidth:650},mainTitle:{marginBottom:20,textAlign:"center"},inconSize:{fontSize:18,textAlign:"center"}}),F=localStorage.getItem("usuario"),P=function(){var e=E(),t=c.a.useState([]),a=Object(b.a)(t,2),o=a[0],s=a[1];c.a.useEffect((function(){null!==F?u():window.location.href="./"}),[]);var l=function(e){var t=new Date(e).getTime()-(new Date).getTime();return Math.floor(t/864e5)},u=function(){var e=Object(h.a)(j.a.mark((function e(){var t,a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://back.prolightpty.com//customers");case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,{},n=[],a.forEach((function(e){e.exting.map((function(t){var a=l(t.next_recharge);return n.push({customer:e.name,brand:t.brand,model:t.model,lastDate:t.last_recharge,nextDate:t.next_recharge,warningIcon:a}),!0}))})),s(n),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return null!==F?Object(n.jsx)(r.Fragment,{children:Object(n.jsxs)(O.a,{component:y.a,children:[Object(n.jsxs)(g.a,{container:!0,spacing:2,children:[Object(n.jsx)(g.a,{item:!0,xs:12,md:6,lg:6,children:Object(n.jsx)(I.a,{className:e.mainTitle,variant:"h4",children:"Extintores"})}),Object(n.jsxs)(g.a,{item:!0,xs:12,md:6,lg:6,className:e.inconSize,children:[Object(n.jsx)(S.a,{style:{color:N.a.A200,fontSize:20}})," Alerta recargar pronto ",Object(n.jsx)("br",{}),Object(n.jsx)(k.a,{style:{color:T.a[600],fontSize:20}})," Fecha de recarga vencida"]})]}),Object(n.jsxs)(x.a,{className:e.table,"aria-label":"simple table",children:[Object(n.jsx)(f.a,{children:Object(n.jsxs)(v.a,{children:[Object(n.jsx)(m.a,{children:"Propietario"}),Object(n.jsx)(m.a,{align:"center",children:"Marca"}),Object(n.jsx)(m.a,{align:"center",children:"Modelo"}),Object(n.jsx)(m.a,{align:"center",children:"\xdaltima Recarga"}),Object(n.jsx)(m.a,{align:"center",children:"Pr\xf3xima Recarga"})]})}),Object(n.jsx)(p.a,{children:o.map((function(e){return Object(n.jsxs)(v.a,{children:[Object(n.jsxs)(m.a,{component:"th",scope:"row",children:[e.customer,"\xa0",e.warningIcon>"0"&&e.warningIcon<="3"?Object(n.jsx)(S.a,{style:{color:N.a.A200}}):"",e.warningIcon<"0"?Object(n.jsx)(k.a,{style:{color:T.a[600]}}):""]}),Object(n.jsx)(m.a,{align:"center",children:e.brand}),Object(n.jsx)(m.a,{align:"center",children:e.model}),Object(n.jsx)(m.a,{align:"center",children:e.lastDate}),Object(n.jsx)(m.a,{align:"center",children:e.nextDate}),Object(n.jsx)(m.a,{align:"center",children:Object(n.jsx)(i.b,{to:"/extintor",children:Object(n.jsx)("button",{className:"btn btn-success btn-sm float-right mr-2",children:"Recargar"})})})]},e.name)}))})]})]})}):Object(n.jsx)(r.Fragment,{})},D=a(49),_=a(80),R=a(159),M=a(160),U=a(81),G=a.n(U),A=a(62),B=localStorage.getItem("usuario"),J=Object(d.a)((function(e){return{offset:Object(_.a)({},e.mixins.toolbar),text:{color:"white","&:hover":{color:A.a[900],textDecoration:"none"}},rightSideNavbar:{float:"right"}}})),q=function(){var e,t=J();return c.a.useEffect((function(){null!==B||(window.location.href="./")}),[]),null!==B?Object(n.jsx)(c.a.Fragment,{children:Object(n.jsx)(R.a,{position:"fixed",color:"primary",children:Object(n.jsxs)(g.a,{container:!0,spacing:2,children:[Object(n.jsx)(g.a,{item:!0,xs:6,md:6,lg:6,className:t.fondo,children:Object(n.jsx)(M.a,{children:Object(n.jsxs)("div",{className:"btn-group",children:[Object(n.jsx)(i.b,{to:"/dashboard",className:t.text,children:Object(n.jsx)(G.a,{})}),"\xa0\xa0"]})})}),Object(n.jsx)(g.a,{item:!0,xs:6,md:6,lg:6,className:t.fondo,children:Object(n.jsx)(M.a,(e={className:"btn-group"},Object(D.a)(e,"className",t.rightSideNavbar),Object(D.a)(e,"children",Object(n.jsxs)("div",{className:"btn-group",children:[Object(n.jsx)(i.b,{to:"/extintor",className:t.text,children:"Registrar Extintor"}),"\xa0\xa0\xa0",Object(n.jsx)(i.c,{to:"/",className:t.text,activeClassName:"active",children:"Salir"}),"\xa0\xa0"]})),e))})]})})}):Object(n.jsx)(r.Fragment,{})},z=a(42),L=a(166),Q=a(164),V=a(82),W=a.n(V),H=a(161),K=a(83),X=a.n(K),Y=a(162),Z=localStorage.getItem("usuario"),$=function(){c.a.useEffect((function(){null!==Z||(window.location.href="./")}),[]);var e={backgroundColor:"#325ed8"},t=(Object(d.a)((function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:310}}}))(),c.a.useState("")),a=Object(b.a)(t,2),o=a[0],s=a[1],i=c.a.useState(""),l=Object(b.a)(i,2),u=l[0],x=l[1],p=c.a.useState(""),m=Object(b.a)(p,2),O=m[0],f=m[1],v=c.a.useState(""),y=Object(b.a)(v,2),w=y[0],S=y[1],C=c.a.useState(""),k=Object(b.a)(C,2),I=k[0],N=k[1],T=c.a.useState(""),E=Object(b.a)(T,2),F=E[0],P=E[1],D=c.a.useState(""),_=Object(b.a)(D,2),R=_[0],M=_[1],U=c.a.useState(""),G=Object(b.a)(U,2),A=G[0],B=G[1],J=c.a.useState(""),q=Object(b.a)(J,2),V=q[0],K=q[1],$=c.a.useState(""),ee=Object(b.a)($,2),te=ee[0],ae=ee[1],ne=c.a.useState([]),re=Object(b.a)(ne,2),ce=re[0],oe=re[1],se=function(){var e=Object(h.a)(j.a.mark((function e(){var t,a,n,r,c,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=0,{},a=[],{},n=[],r="",e.next=8,fetch("https://back.prolightpty.com//customers");case 8:return c=e.sent,e.next=11,c.json();case 11:0!=(o=e.sent).length&&o.forEach((function(e){e.doc===I&&(t+=1,r=e.id,e.exting.map((function(e){e.history.map((function(e){e.serial===A&&n.push({id:e.id,extinguisher:e.extinguisher,customer:e.customer,user:e.user,last_recharge:e.last_recharge})})),a.push({id:e.id,serial:e.serial,brand:e.brand,model:e.model,last_recharge:e.last_recharge,next_recharge:e.next_recharge})})))})),0===t?(ie(n),setTimeout((function(){console.log("Insertando datos...")}),3e3),window.location.href="./dashboard"):(le(a,n,r),setTimeout((function(){console.log("Insertando datos...")}),3e3),window.location.href="./dashboard");case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=Object(h.a)(j.a.mark((function e(t){var a,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o,address:u,phone:O,doc:I,exting:[{serial:A,brand:F,model:R,last_recharge:V,next_recharge:te}]})},e.next=3,fetch("https://back.prolightpty.com//customers",a);case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,ue(r.id,t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(h.a)(j.a.mark((function e(t,a,n){var r,c,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.push({serial:A,brand:F,model:R,last_recharge:V,next_recharge:te}),r={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:u,phone:O,exting:t})},e.next=4,fetch("https://back.prolightpty.com//customers/".concat(n),r);case 4:return c=e.sent,e.next=7,c.json();case 7:o=e.sent,ue(o.id,a);case 9:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ue=function(){var e=Object(h.a)(j.a.mark((function e(t,a){var n,r,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",a.push({extinguisher:A,customer:o,user:Z,last_recharge:te}),r={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({history:a})},e.next=5,fetch("https://back.prolightpty.com//customers/".concat(t));case 5:return c=e.sent,e.next=8,c.json();case 8:if(e.sent.exting.forEach((function(e){e.serial===A&&(n=e.id)})),""===n){e.next=17;break}return e.next=13,fetch("https://back.prolightpty.com//extings/".concat(n),r);case 13:return s=e.sent,e.next=16,s.json();case 16:e.sent;case 17:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return null!==Z?Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{align:"center",children:"Formulario De Registro"}),Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o.trim()?u.trim()?O.trim()?w.trim()?I.trim()?F.trim()?R.trim()?A.trim()?V.trim()?te.trim()?(oe([].concat(Object(z.a)(ce),[{nombraNombre:o,nombreDireccion:u,nombreTelefono:O,nombreCorreo:w,nombreCedula:I,nombreMarca:F,nombreModelo:R,nombreSerial:A,nombreFechaU:V,nombreFechaS:te}])),e.target.reset(),s(""),x(""),f(""),S(""),N(""),P(""),M(""),B(""),K(""),ae(""),se()):console.log("esta vacio serial"):console.log("esta vacio fechaU"):console.log("esta vacio serial"):console.log("esta vacio modelo"):console.log("esta vacio marca"):console.log("esta vacio cedula"):console.log("esta vacio correo"):console.log("esta vacio telefono"):console.log("esta vacio direccion"):console.log("esta vacio nombre")},children:[Object(n.jsxs)(g.a,{container:!0,spacing:2,children:[Object(n.jsx)(g.a,{item:!0,xs:12,md:6,lg:6,children:Object(n.jsxs)(g.a,{align:"center",children:[Object(n.jsx)(L.a,{style:e,children:Object(n.jsx)(W.a,{})}),Object(n.jsx)("h2",{children:"Datos del Cliente"}),Object(n.jsx)(Q.a,{label:"Nombre",placeholder:"Ingresar Nombre",onChange:function(e){return s(e.target.value)}}),Object(n.jsx)(H.a,{}),Object(n.jsx)(Q.a,{label:"Direccion",placeholder:"Ingresar Direccion",onChange:function(e){return x(e.target.value)}}),Object(n.jsx)(H.a,{}),Object(n.jsx)(Q.a,{label:"Telefono",placeholder:"Ingresar Telefono",onChange:function(e){return f(e.target.value)}}),Object(n.jsx)(H.a,{}),Object(n.jsx)(Q.a,{label:"Correo",placeholder:"Ingresar Correo",onChange:function(e){return S(e.target.value)}}),Object(n.jsx)(H.a,{}),Object(n.jsx)(Q.a,{label:"Cedula Cliente",placeholder:"Ingresar CC",onChange:function(e){return N(e.target.value)}}),Object(n.jsx)(H.a,{})]})}),Object(n.jsx)(g.a,{item:!0,xs:12,md:6,lg:6,children:Object(n.jsxs)(g.a,{align:"center",children:[Object(n.jsx)(L.a,{style:e,children:Object(n.jsx)(X.a,{})}),Object(n.jsx)("h2",{children:"Datos del Extintor"}),Object(n.jsx)(Q.a,{label:"Marca",placeholder:"Ingresar Marca",onChange:function(e){return P(e.target.value)}}),Object(n.jsx)(H.a,{}),Object(n.jsx)(Q.a,{label:"Modelo",placeholder:"Ingresar Modelo",onChange:function(e){return M(e.target.value)}}),Object(n.jsx)(H.a,{}),Object(n.jsx)(Q.a,{label:"Serial del Extintor",placeholder:"Ingresar Serial",onChange:function(e){return B(e.target.value)}}),Object(n.jsx)(H.a,{}),Object(n.jsx)(Q.a,{id:"date",onChange:function(e){return K(e.target.value)},label:"Fecha Ultima Recarga",type:"date",InputLabelProps:{shrink:!0}}),Object(n.jsx)(H.a,{}),Object(n.jsx)(Q.a,{id:"date",onChange:function(e){return ae(e.target.value)},label:"Fecha Siguiente Recarga",type:"date",InputLabelProps:{shrink:!0}}),Object(n.jsx)(H.a,{})]})})]}),Object(n.jsx)(g.a,{align:"center",children:Object(n.jsx)(Y.a,{type:"submit",color:"primary",variant:"contained",style:{margin:"8px 0",align:"center"},fullwidth:!0,children:"Registrar"})})]})]}):Object(n.jsx)(r.Fragment,{})},ee=a(61),te=a.n(ee),ae=function(){var e=c.a.useState(""),t=Object(b.a)(e,2),a=t[0],r=t[1],o=c.a.useState(""),s=Object(b.a)(o,2),i=s[0],u=s[1],d=c.a.useState(""),x=Object(b.a)(d,2),p=x[0],m=x[1],O=c.a.useState([]),f=Object(b.a)(O,2),v=f[0],w=f[1],S=(Object(l.f)(),function(){var e=Object(h.a)(j.a.mark((function e(){var t,n,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=0,n={},{method:"GET",headers:{"Content-Type":"application/json"}},e.next=5,fetch("https://back.prolightpty.com//users");case 5:return r=e.sent,e.next=8,r.json();case 8:0!=(c=e.sent).length&&c.forEach((function(e){if(e.login===i)throw t+=1,alert("Usted ya esta registrado, por favor ingrese con su cuenta"),n})),0===t&&(C(),localStorage.setItem("usuario",a),alert("Su registro ha sido exitoso!"),window.location.href="./dashboard");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),C=function(){var e=Object(h.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,login:i,password:p})},e.next=3,fetch("https://back.prolightpty.com//users",t);case 3:return n=e.sent,e.next=6,n.json();case 6:e.sent;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)(g.a,{children:Object(n.jsx)(y.a,{elevation:10,style:{padding:20,height:"70vh",width:270,margin:"20px auto"},children:Object(n.jsxs)(g.a,{align:"center",children:[Object(n.jsx)(L.a,{style:{backgroundColor:"#325ed8"},children:Object(n.jsx)(te.a,{})}),Object(n.jsx)("h3",{children:"Nueva Cuenta"}),Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a.trim()?i.trim()?p.trim()?(w([].concat(Object(z.a)(v),[{nombraNombre:a,nombreDireccion:i,nombreTelefono:p}])),e.target.reset(),r(""),u(""),m(""),S()):console.log("esta vacio password"):console.log("esta vacio correo"):console.log("esta vacio nombre")},children:[Object(n.jsx)(Q.a,{label:"Nombre",placeholder:"Ingresar Nombre",onChange:function(e){return r(e.target.value)},fullwidth:!0,required:!0}),Object(n.jsx)(Q.a,{label:"Correo Electronico",placeholder:"Ingresar Correo",onChange:function(e){return u(e.target.value)},fullwidth:!0,required:!0,type:"email"}),Object(n.jsx)(Q.a,{label:"Password",placeholder:"Ingresar Clave",type:"Password",onChange:function(e){return m(e.target.value)},fullwidth:!0,required:!0}),Object(n.jsx)(Y.a,{type:"submit",color:"primary",variant:"contained",style:{margin:"8px 0"},fullwidth:!0,children:"Registrar"})]})]})})})},ne=a(163),re=a(165),ce=localStorage.getItem("usuario"),oe=function(){c.a.useEffect((function(){null!==ce&&localStorage.removeItem("usuario")}),[]);var e=c.a.useState(""),t=Object(b.a)(e,2),a=t[0],r=t[1],o=c.a.useState(""),s=Object(b.a)(o,2),l=s[0],u=s[1],d=c.a.useState([]),x=Object(b.a)(d,2),p=x[0],m=x[1],O=function(){var e=Object(h.a)(j.a.mark((function e(){var t,n,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=0,n=0,{},{method:"GET",headers:{"Content-Type":"application/json"}},e.next=6,fetch("https://back.prolightpty.com//users");case 6:return r=e.sent,e.next=9,r.json();case 9:0!=(c=e.sent).length&&c.forEach((function(e){e.login===a&&(t+=1,e.password===l&&(n+=1,localStorage.setItem("usuario",e.name),window.location.href="./dashboard"))})),0===t?alert("Usted no se encuentra registrado, por favor continue al formulario de registro."):0===n&&alert("Usuario y/o contrase\xf1a incorrectos.");case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)(g.a,{children:Object(n.jsx)(y.a,{elevation:10,style:{padding:20,height:"70vh",width:270,margin:"20px auto"},children:Object(n.jsxs)(g.a,{align:"center",children:[Object(n.jsx)(L.a,{style:{backgroundColor:"#325ed8"},children:Object(n.jsx)(te.a,{})}),Object(n.jsx)("h3",{children:"Ingresa"}),Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a.trim()?l.trim()?(m([].concat(Object(z.a)(p),[{nombraCorreo:a,nombrePassword:l}])),e.target.reset(),r(""),u(""),O()):console.log("esta vacio password"):console.log("esta vacio correo")},children:[Object(n.jsx)(Q.a,{label:"Correo Electronico",placeholder:"Ingresar Correo",onChange:function(e){return r(e.target.value)},fullwidth:!0,required:!0,type:"email"}),Object(n.jsx)(Q.a,{label:"Password",placeholder:"Ingresar Clave",type:"Password",onChange:function(e){return u(e.target.value)},fullwidth:!0,required:!0}),Object(n.jsx)(ne.a,{control:Object(n.jsx)(re.a,{name:"checkedB",color:"primary"}),label:"Recordar usuario"}),Object(n.jsx)(Y.a,{type:"submit",color:"primary",variant:"contained",style:{margin:"8px 0"},fullwidth:!0,children:"Iniciar Sesion"})]}),Object(n.jsx)(I.a,{children:Object(n.jsx)(i.b,{to:"signup",children:"REG\xcdSTRATE"})})]})})})};var se=function(){return Object(n.jsx)(i.a,{children:Object(n.jsxs)("div",{className:"container mt-5",children:[Object(n.jsx)("hr",{}),Object(n.jsxs)(l.c,{children:[Object(n.jsx)(l.a,{path:"/",exact:!0,children:Object(n.jsx)(oe,{})}),Object(n.jsx)(l.a,{path:"/signup",exact:!0,children:Object(n.jsx)(ae,{})}),Object(n.jsxs)(l.a,{path:"/dashboard",exact:!0,children:[Object(n.jsx)("link",{rel:"stylesheet",href:"https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css",integrity:"sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh",crossorigin:"anonymous"}),Object(n.jsx)(q,{}),Object(n.jsx)(P,{})]}),Object(n.jsxs)(l.a,{path:"/extintor",children:[Object(n.jsx)("link",{rel:"stylesheet",href:"https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css",integrity:"sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh",crossorigin:"anonymous"}),Object(n.jsx)(q,{}),Object(n.jsx)($,{})]})]})]})})},ie=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,168)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),n(e),r(e),c(e),o(e)}))},le=a(84),ue=Object(le.a)();s.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(se,{})}),document.getElementById("root")),ie()}},[[108,1,2]]]);
//# sourceMappingURL=main.5e3d1cf9.chunk.js.map